<!DOCTYPE html>
<html lang="th">
<head>
Â  Â  <meta charset="UTF-8">
Â  Â  <meta name="viewport" content="width=device-width, initial-scale=1.0">
Â  Â  <title>à¸£à¸°à¸šà¸šà¸¢à¹ˆà¸­ URL - à¹‚à¸£à¸‡à¹€à¸£à¸µà¸¢à¸™à¸„à¸¸à¸“à¸˜à¸£à¸£à¸¡ à¸ªà¸à¸. à¹‚à¸£à¸‡à¹€à¸£à¸µà¸¢à¸™à¸ªà¸•à¸£à¸µà¸à¸±à¸—à¸¥à¸¸à¸‡</title>
Â  Â  <script src="https://cdn.tailwindcss.com"></script>
Â  Â  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
Â  Â  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
Â  Â  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
Â  Â  Â  Â  <script src="https://cdn.jsdelivr.net/npm/qrcodejs@1.0.0/qrcode.min.js"></script> 
Â  Â  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
Â  Â  Â  Â  <style>
Â  Â  Â  Â  body {
Â  Â  Â  Â  Â  Â  box-sizing: border-box;
Â  Â  Â  Â  Â  Â  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
Â  Â  Â  Â  }
Â  Â  Â  Â  .gradient-bg {
Â  Â  Â  Â  Â  Â  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
Â  Â  Â  Â  }
Â  Â  Â  Â  .glass-effect {
Â  Â  Â  Â  Â  Â  background: rgba(255, 255, 255, 0.95);
Â  Â  Â  Â  Â  Â  backdrop-filter: blur(10px);
Â  Â  Â  Â  Â  Â  border: 1px solid rgba(255, 255, 255, 0.2);
Â  Â  Â  Â  }
Â  Â  Â  Â  .animate-fade-in {
Â  Â  Â  Â  Â  Â  animation: fadeIn 0.5s ease-in;
Â  Â  Â  Â  }
Â  Â  Â  Â  @keyframes fadeIn {
Â  Â  Â  Â  Â  Â  from { opacity: 0; transform: translateY(20px); }
Â  Â  Â  Â  Â  Â  to { opacity: 1; transform: translateY(0); }
Â  Â  Â  Â  }
Â  Â  Â  Â  .btn-hover {
Â  Â  Â  Â  Â  Â  transition: all 0.3s ease;
Â  Â  Â  Â  }
Â  Â  Â  Â  .btn-hover:hover {
Â  Â  Â  Â  Â  Â  transform: translateY(-2px);
Â  Â  Â  Â  Â  Â  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
Â  Â  Â  Â  }
Â  Â  Â  Â  /* ğŸŸ¢ Style à¸ªà¸³à¸«à¸£à¸±à¸šà¸„à¸­à¸™à¹€à¸—à¸™à¹€à¸™à¸­à¸£à¹Œ QR Code */
Â  Â  Â  Â  #qrcodeCanvas {
Â  Â  Â  Â  Â  Â  display: inline-block;
Â  Â  Â  Â  }
Â  Â  </style>
</head>
<body class="min-h-full bg-gray-50">
Â  Â  <div class="min-h-full bg-white">
Â  Â  Â  Â  Â  Â  Â  Â  <header class="glass-effect shadow-lg">
Â  Â  Â  Â  Â  Â  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex justify-between items-center py-4">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex items-center space-x-4">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <img src="https://img5.pic.in.th/file/secure-sv1/IMG_25650953161d1c1bbdd8.jpeg"Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â alt="à¹‚à¸¥à¹‚à¸à¹‰à¹‚à¸£à¸‡à¹€à¸£à¸µà¸¢à¸™" class="h-12 w-12 rounded-full object-cover shadow-md"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â onerror="this.src=''; this.alt='à¹‚à¸¥à¹‚à¸à¹‰à¹‚à¸£à¸‡à¹€à¸£à¸µà¸¢à¸™'; this.style.display='none';">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h1 class="text-xl font-bold text-gray-800">à¸£à¸°à¸šà¸šà¸¢à¹ˆà¸­ URL</h1>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p class="text-sm text-gray-600">à¹‚à¸£à¸‡à¹€à¸£à¸µà¸¢à¸™à¸„à¸¸à¸“à¸˜à¸£à¸£à¸¡ à¸ªà¸à¸. à¹‚à¸£à¸‡à¹€à¸£à¸µà¸¢à¸™à¸ªà¸•à¸£à¸µà¸à¸±à¸—à¸¥à¸¸à¸‡</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div id="userMenu" class="hidden">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex items-center space-x-4">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span id="userEmail" class="text-sm text-gray-700"></span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button onclick="logout()" class="bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg btn-hover">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  à¸­à¸­à¸à¸ˆà¸²à¸à¸£à¸°à¸šà¸š
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </header>

Â  Â  Â  Â  Â  Â  Â  Â  <main class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div id="loginForm" class="animate-fade-in">
Â  Â  Â  Â  Â  Â  Â  Â  <div class="glass-effect rounded-2xl shadow-xl p-8 max-w-md mx-auto">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="text-center mb-8">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h2 class="text-3xl font-bold text-gray-800 mb-2">à¹€à¸‚à¹‰à¸²à¸ªà¸¹à¹ˆà¸£à¸°à¸šà¸š</h2>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p class="text-gray-600">à¸à¸£à¸¸à¸“à¸²à¹€à¸‚à¹‰à¸²à¸ªà¸¹à¹ˆà¸£à¸°à¸šà¸šà¹€à¸à¸·à¹ˆà¸­à¹ƒà¸Šà¹‰à¸‡à¸²à¸™</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <form onsubmit="handleLogin(event)" class="space-y-6">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label class="block text-sm font-medium text-gray-700 mb-2">à¸­à¸µà¹€à¸¡à¸¥</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="email" id="loginEmail" requiredÂ 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label class="block text-sm font-medium text-gray-700 mb-2">à¸£à¸«à¸±à¸ªà¸œà¹ˆà¸²à¸™</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="password" id="loginPassword" requiredÂ 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button type="submit" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-3 px-4 rounded-xl btn-hover">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  à¹€à¸‚à¹‰à¸²à¸ªà¸¹à¹ˆà¸£à¸°à¸šà¸š
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </form>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="mt-6 text-center">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button onclick="showRegisterForm()" class="text-blue-600 hover:text-blue-800 font-medium">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  à¸¥à¸‡à¸—à¸°à¹€à¸šà¸µà¸¢à¸™à¹ƒà¸«à¸¡à¹ˆ
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div id="registerForm" class="hidden animate-fade-in">
Â  Â  Â  Â  Â  Â  Â  Â  <div class="glass-effect rounded-2xl shadow-xl p-8 max-w-md mx-auto">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="text-center mb-8">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h2 class="text-3xl font-bold text-gray-800 mb-2">à¸¥à¸‡à¸—à¸°à¹€à¸šà¸µà¸¢à¸™</h2>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p class="text-gray-600">à¸£à¸­à¸à¸²à¸£à¸­à¸™à¸¸à¸¡à¸±à¸•à¸´à¸ˆà¸²à¸à¸œà¸¹à¹‰à¸”à¸¹à¹à¸¥à¸£à¸°à¸šà¸š</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <form onsubmit="handleRegister(event)" class="space-y-6">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label class="block text-sm font-medium text-gray-700 mb-2">à¸Šà¸·à¹ˆà¸­-à¸™à¸²à¸¡à¸ªà¸à¸¸à¸¥</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="text" id="registerName" requiredÂ 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label class="block text-sm font-medium text-gray-700 mb-2">à¸­à¸µà¹€à¸¡à¸¥</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="email" id="registerEmail" requiredÂ 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label class="block text-sm font-medium text-gray-700 mb-2">à¸£à¸«à¸±à¸ªà¸œà¹ˆà¸²à¸™</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="password" id="registerPassword" requiredÂ 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button type="submit" class="w-full bg-green-600 hover:bg-green-700 text-white font-medium py-3 px-4 rounded-xl btn-hover">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  à¸¥à¸‡à¸—à¸°à¹€à¸šà¸µà¸¢à¸™
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </form>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="mt-6 text-center">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button onclick="showLoginForm()" class="text-blue-600 hover:text-blue-800 font-medium">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  à¸à¸¥à¸±à¸šà¹„à¸›à¹€à¸‚à¹‰à¸²à¸ªà¸¹à¹ˆà¸£à¸°à¸šà¸š
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div id="dashboard" class="hidden animate-fade-in">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="glass-effect rounded-2xl shadow-xl p-8 mb-8">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h2 class="text-2xl font-bold text-gray-800 mb-6">à¸ªà¸£à¹‰à¸²à¸‡à¸¥à¸´à¸‡à¸à¹Œà¸¢à¹ˆà¸­</h2>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <form onsubmit="createShortUrl(event)" class="space-y-6">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label class="block text-sm font-medium text-gray-700 mb-2">URL à¹€à¸”à¸´à¸¡</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="url" id="originalUrl" required placeholder="https://example.com"Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label class="block text-sm font-medium text-gray-700 mb-2">à¸Šà¸·à¹ˆà¸­à¸¥à¸´à¸‡à¸à¹Œ (à¹„à¸¡à¹ˆà¸šà¸±à¸‡à¸„à¸±à¸š)</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="text" id="customName" placeholder="à¸Šà¸·à¹ˆà¸­à¸—à¸µà¹ˆà¸•à¹‰à¸­à¸‡à¸à¸²à¸£"Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex items-center">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="checkbox" id="isPublic" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label for="isPublic" class="ml-2 block text-sm text-gray-700">à¹à¸ªà¸”à¸‡à¸œà¸¥à¸ªà¸²à¸˜à¸²à¸£à¸“à¸°</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button type="submit" class="w-full bg-purple-600 hover:bg-purple-700 text-white font-medium py-3 px-4 rounded-xl btn-hover">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  à¸ªà¸£à¹‰à¸²à¸‡à¸¥à¸´à¸‡à¸à¹Œà¸¢à¹ˆà¸­
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </form>
Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="mb-6">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex space-x-1 bg-white rounded-xl p-1 shadow-md">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button onclick="showTab('myLinks')" id="myLinksTab" class="flex-1 py-2 px-4 rounded-lg font-medium transition-all bg-blue-600 text-white">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  à¸¥à¸´à¸‡à¸à¹Œà¸‚à¸­à¸‡à¸‰à¸±à¸™
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button onclick="showTab('publicLinks')" id="publicLinksTab" class="flex-1 py-2 px-4 rounded-lg font-medium transition-all text-gray-600 hover:text-gray-800">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  à¸¥à¸´à¸‡à¸à¹Œà¸ªà¸²à¸˜à¸²à¸£à¸“à¸°
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button onclick="showTab('adminPanel')" id="adminTab" class="hidden flex-1 py-2 px-4 rounded-lg font-medium transition-all text-gray-600 hover:text-gray-800">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  à¸ˆà¸±à¸”à¸à¸²à¸£à¸£à¸°à¸šà¸š
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div id="myLinksContent" class="glass-effect rounded-2xl shadow-xl p-8">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h3 class="text-xl font-bold text-gray-800 mb-6">à¸¥à¸´à¸‡à¸à¹Œà¸‚à¸­à¸‡à¸‰à¸±à¸™</h3>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div id="myLinksList" class="space-y-4">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div id="publicLinksContent" class="hidden glass-effect rounded-2xl shadow-xl p-8">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h3 class="text-xl font-bold text-gray-800 mb-6">à¸¥à¸´à¸‡à¸à¹Œà¸ªà¸²à¸˜à¸²à¸£à¸“à¸°</h3>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div id="publicLinksList" class="space-y-4">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div id="adminContent" class="hidden glass-effect rounded-2xl shadow-xl p-8">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h3 class="text-xl font-bold text-gray-800 mb-6">à¸ˆà¸±à¸”à¸à¸²à¸£à¸£à¸°à¸šà¸š</h3>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="space-y-6">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h4 class="text-lg font-semibold text-gray-700 mb-4">à¸„à¸³à¸‚à¸­à¸­à¸™à¸¸à¸¡à¸±à¸•à¸´</h4>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div id="pendingUsers" class="space-y-3">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div id="messageContainer" class="fixed top-4 right-4 z-50"></div>
Â  Â  Â  Â  </main>

Â  Â  Â  Â  Â  Â  Â  Â  <footer class="mt-16 bg-white border-t border-gray-200">
Â  Â  Â  Â  Â  Â  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6">
Â  Â  Â  Â  Â  Â  Â  Â  <div class="text-center text-gray-600 text-sm">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â©ï¸ 2024 SPT MORAL SCHOOL - à¹‚à¸£à¸‡à¹€à¸£à¸µà¸¢à¸™à¸„à¸¸à¸“à¸˜à¸£à¸£à¸¡ à¸ªà¸à¸. à¹‚à¸£à¸‡à¹€à¸£à¸µà¸¢à¸™à¸ªà¸•à¸£à¸µà¸à¸±à¸—à¸¥à¸¸à¸‡ | All Rights Reserved
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </footer>
Â  Â  </div>

Â  Â  <script>
Â  Â  Â  Â  // Firebase Configuration
Â  Â  Â  Â  const firebaseConfig = {
Â  Â  Â  Â  Â  Â  apiKey: "AIzaSyAqpgEbVDyjkb_YMxM-Og0I6mKyx6djjhk",
Â  Â  Â  Â  Â  Â  authDomain: "short-url-spt-moral-school.firebaseapp.com",
Â  Â  Â  Â  Â  Â  projectId: "short-url-spt-moral-school",
Â  Â  Â  Â  Â  Â  storageBucket: "short-url-spt-moral-school.firebasestorage.app",
Â  Â  Â  Â  Â  Â  messagingSenderId: "688796719253",
Â  Â  Â  Â  Â  Â  appId: "1:688796719253:web:08304cd58e97e1ab88639c",
Â  Â  Â  Â  Â  Â  measurementId: "G-0R3MZQP87E"
Â  Â  Â  Â  };

Â  Â  Â  Â  // Initialize Firebase
Â  Â  Â  Â  firebase.initializeApp(firebaseConfig);
Â  Â  Â  Â  const auth = firebase.auth();
Â  Â  Â  Â  const db = firebase.firestore();

Â  Â  Â  Â  let currentUser = null;
Â  Â  Â  Â  const adminEmail = 'sptmorral@spt.ac.th';
Â  Â  Â  Â  
Â  Â  Â  Â  // ğŸŸ¢ à¸à¸³à¸«à¸™à¸” URL à¹‚à¸¥à¹‚à¸à¹‰
Â  Â  Â  Â  const LOGO_URL = 'https://img5.pic.in.th/file/secure-sv1/IMG_25650953161d1c1bbdd8.jpeg';

Â  Â  Â  Â  // Initialize Admin Account
Â  Â  Â  Â  async function initializeAdmin() {
Â  Â  Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  Â  Â  // Check if admin account exists in database
Â  Â  Â  Â  Â  Â  Â  Â  const adminQuery = await db.collection('users').where('email', '==', adminEmail).get();
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  if (adminQuery.empty) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // Try to create admin account
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const adminCredential = await auth.createUserWithEmailAndPassword(adminEmail, 'SPTMoralSchool');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const adminUser = adminCredential.user;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  await db.collection('users').doc(adminUser.uid).set({
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  name: 'à¸œà¸¹à¹‰à¸”à¸¹à¹à¸¥à¸£à¸°à¸šà¸š',
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  email: adminEmail,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  approved: true,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  isAdmin: true,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  createdAt: firebase.firestore.FieldValue.serverTimestamp()
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  console.log('Admin account created successfully');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  await auth.signOut(); // Sign out after creating admin account
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } catch (authError) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (authError.code === 'auth/email-already-in-use') {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // Account exists in Firebase Auth but not in Firestore
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  console.log('Admin account exists in Auth, checking Firestore...');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // Try to sign in to get the user
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const signInResult = await auth.signInWithEmailAndPassword(adminEmail, 'SPTMoralSchool');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const existingUser = signInResult.user;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // Create the user document in Firestore
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  await db.collection('users').doc(existingUser.uid).set({
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  name: 'à¸œà¸¹à¹‰à¸”à¸¹à¹à¸¥à¸£à¸°à¸šà¸š',
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  email: adminEmail,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  approved: true,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  isAdmin: true,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  createdAt: firebase.firestore.FieldValue.serverTimestamp()
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  console.log('Admin document created in Firestore');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  await auth.signOut();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } catch (signInError) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  console.log('Could not sign in to existing admin account:', signInError.message);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  console.log('Error creating admin account:', authError.message);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  console.log('Admin account already exists');
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  } catch (error) {
Â  Â  Â  Â  Â  Â  Â  Â  console.log('Error initializing admin:', error.message);
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  // Initialize admin account on page load
Â  Â  Â  Â  document.addEventListener('DOMContentLoaded', () => {
Â  Â  Â  Â  Â  Â  setTimeout(initializeAdmin, 1000); // Wait for Firebase to initialize
Â  Â  Â  Â  });

Â  Â  Â  Â  // Auth State Observer
Â  Â  Â  Â  auth.onAuthStateChanged(async (user) => {
Â  Â  Â  Â  Â  Â  if (user) {
Â  Â  Â  Â  Â  Â  Â  Â  const userDoc = await db.collection('users').doc(user.uid).get();
Â  Â  Â  Â  Â  Â  Â  Â  if (userDoc.exists && userDoc.data().approved) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  currentUser = user;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  showDashboard();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  loadUserLinks();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  loadPublicLinks();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (user.email === adminEmail) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  showAdminPanel();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  loadPendingUsers();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  showMessage('à¸£à¸­à¸à¸²à¸£à¸­à¸™à¸¸à¸¡à¸±à¸•à¸´à¸ˆà¸²à¸à¸œà¸¹à¹‰à¸”à¸¹à¹à¸¥à¸£à¸°à¸šà¸š', 'warning');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  auth.signOut();
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  currentUser = null;
Â  Â  Â  Â  Â  Â  Â  Â  showLoginForm();
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  });

Â  Â  Â  Â  // Show/Hide Functions
Â  Â  Â  Â  function showLoginForm() {
Â  Â  Â  Â  Â  Â  document.getElementById('loginForm').classList.remove('hidden');
Â  Â  Â  Â  Â  Â  document.getElementById('registerForm').classList.add('hidden');
Â  Â  Â  Â  Â  Â  document.getElementById('dashboard').classList.add('hidden');
Â  Â  Â  Â  Â  Â  document.getElementById('userMenu').classList.add('hidden');
Â  Â  Â  Â  }

Â  Â  Â  Â  function showRegisterForm() {
Â  Â  Â  Â  Â  Â  document.getElementById('loginForm').classList.add('hidden');
Â  Â  Â  Â  Â  Â  document.getElementById('registerForm').classList.remove('hidden');
Â  Â  Â  Â  Â  Â  document.getElementById('dashboard').classList.add('hidden');
Â  Â  Â  Â  }

Â  Â  Â  Â  function showDashboard() {
Â  Â  Â  Â  Â  Â  document.getElementById('loginForm').classList.add('hidden');
Â  Â  Â  Â  Â  Â  document.getElementById('registerForm').classList.add('hidden');
Â  Â  Â  Â  Â  Â  document.getElementById('dashboard').classList.remove('hidden');
Â  Â  Â  Â  Â  Â  document.getElementById('userMenu').classList.remove('hidden');
Â  Â  Â  Â  Â  Â  document.getElementById('userEmail').textContent = currentUser.email;
Â  Â  Â  Â  }

Â  Â  Â  Â  function showAdminPanel() {
Â  Â  Â  Â  Â  Â  document.getElementById('adminTab').classList.remove('hidden');
Â  Â  Â  Â  }

Â  Â  Â  Â  function showTab(tabName) {
Â  Â  Â  Â  Â  Â  // Hide all content
Â  Â  Â  Â  Â  Â  document.getElementById('myLinksContent').classList.add('hidden');
Â  Â  Â  Â  Â  Â  document.getElementById('publicLinksContent').classList.add('hidden');
Â  Â  Â  Â  Â  Â  document.getElementById('adminContent').classList.add('hidden');

Â  Â  Â  Â  Â  Â  // Reset all tabs
Â  Â  Â  Â  Â  Â  document.getElementById('myLinksTab').classList.remove('bg-blue-600', 'text-white');
Â  Â  Â  Â  Â  Â  document.getElementById('myLinksTab').classList.add('text-gray-600');
Â  Â  Â  Â  Â  Â  document.getElementById('publicLinksTab').classList.remove('bg-blue-600', 'text-white');
Â  Â  Â  Â  Â  Â  document.getElementById('publicLinksTab').classList.add('text-gray-600');
Â  Â  Â  Â  Â  Â  document.getElementById('adminTab').classList.remove('bg-blue-600', 'text-white');
Â  Â  Â  Â  Â  Â  document.getElementById('adminTab').classList.add('text-gray-600');

Â  Â  Â  Â  Â  Â  // Show selected content and activate tab
Â  Â  Â  Â  Â  Â  if (tabName === 'myLinks') {
Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('myLinksContent').classList.remove('hidden');
Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('myLinksTab').classList.add('bg-blue-600', 'text-white');
Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('myLinksTab').classList.remove('text-gray-600');
Â  Â  Â  Â  Â  Â  } else if (tabName === 'publicLinks') {
Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('publicLinksContent').classList.remove('hidden');
Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('publicLinksTab').classList.add('bg-blue-600', 'text-white');
Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('publicLinksTab').classList.remove('text-gray-600');
Â  Â  Â  Â  Â  Â  } else if (tabName === 'adminPanel') {
Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('adminContent').classList.remove('hidden');
Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('adminTab').classList.add('bg-blue-600', 'text-white');
Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('adminTab').classList.remove('text-gray-600');
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  // Authentication Functions
Â  Â  Â  Â  async function handleLogin(event) {
Â  Â  Â  Â  Â  Â  event.preventDefault();
Â  Â  Â  Â  Â  Â  const email = document.getElementById('loginEmail').value;
Â  Â  Â  Â  Â  Â  const password = document.getElementById('loginPassword').value;

Â  Â  Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  Â  Â  await auth.signInWithEmailAndPassword(email, password);
Â  Â  Â  Â  Â  Â  } catch (error) {
Â  Â  Â  Â  Â  Â  Â  Â  showMessage('à¹€à¸‚à¹‰à¸²à¸ªà¸¹à¹ˆà¸£à¸°à¸šà¸šà¹„à¸¡à¹ˆà¸ªà¸³à¹€à¸£à¹‡à¸ˆ: ' + error.message, 'error');
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  async function handleRegister(event) {
Â  Â  Â  Â  Â  Â  event.preventDefault();
Â  Â  Â  Â  Â  Â  const name = document.getElementById('registerName').value;
Â  Â  Â  Â  Â  Â  const email = document.getElementById('registerEmail').value;
Â  Â  Â  Â  Â  Â  const password = document.getElementById('registerPassword').value;

Â  Â  Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  Â  Â  const userCredential = await auth.createUserWithEmailAndPassword(email, password);
Â  Â  Â  Â  Â  Â  Â  Â  const user = userCredential.user;

Â  Â  Â  Â  Â  Â  Â  Â  await db.collection('users').doc(user.uid).set({
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  name: name,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  email: email,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  approved: email === adminEmail,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  createdAt: firebase.firestore.FieldValue.serverTimestamp()
Â  Â  Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  Â  Â  if (email === adminEmail) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  showMessage('à¸¥à¸‡à¸—à¸°à¹€à¸šà¸µà¸¢à¸™à¸ªà¸³à¹€à¸£à¹‡à¸ˆ!', 'success');
Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  showMessage('à¸¥à¸‡à¸—à¸°à¹€à¸šà¸µà¸¢à¸™à¸ªà¸³à¹€à¸£à¹‡à¸ˆ! à¸£à¸­à¸à¸²à¸£à¸­à¸™à¸¸à¸¡à¸±à¸•à¸´à¸ˆà¸²à¸à¸œà¸¹à¹‰à¸”à¸¹à¹à¸¥à¸£à¸°à¸šà¸š', 'success');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  auth.signOut();
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  } catch (error) {
Â  Â  Â  Â  Â  Â  Â  Â  showMessage('à¸¥à¸‡à¸—à¸°à¹€à¸šà¸µà¸¢à¸™à¹„à¸¡à¹ˆà¸ªà¸³à¹€à¸£à¹‡à¸ˆ: ' + error.message, 'error');
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  async function logout() {
Â  Â  Â  Â  Â  Â  await auth.signOut();
Â  Â  Â  Â  Â  Â  showMessage('à¸­à¸­à¸à¸ˆà¸²à¸à¸£à¸°à¸šà¸šà¹à¸¥à¹‰à¸§', 'success');
Â  Â  Â  Â  }

Â  Â  Â  Â  // URL Shortener Functions
Â  Â  Â  Â  async function createShortUrl(event) {
Â  Â  Â  Â  Â  Â  event.preventDefault();
Â  Â  Â  Â  Â  Â  const originalUrl = document.getElementById('originalUrl').value;
Â  Â  Â  Â  Â  Â  const customName = document.getElementById('customName').value;
Â  Â  Â  Â  Â  Â  const isPublic = document.getElementById('isPublic').checked;

Â  Â  Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  Â  Â  const shortCode = customName || generateShortCode();
Â  Â  Â  Â  Â  Â  Â  Â  const shortUrl = `https://spt-moral-school.github.io/link/${shortCode}`;

Â  Â  Â  Â  Â  Â  Â  Â  await db.collection('urls').doc(shortCode).set({
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  originalUrl: originalUrl,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  shortCode: shortCode,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  shortUrl: shortUrl,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  createdBy: currentUser.uid,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  createdByEmail: currentUser.email,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  isPublic: isPublic,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  clicks: 0,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  createdAt: firebase.firestore.FieldValue.serverTimestamp()
Â  Â  Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  Â  Â  showMessage('à¸ªà¸£à¹‰à¸²à¸‡à¸¥à¸´à¸‡à¸à¹Œà¸¢à¹ˆà¸­à¸ªà¸³à¹€à¸£à¹‡à¸ˆ!', 'success');
Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('originalUrl').value = '';
Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('customName').value = '';
Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('isPublic').checked = false;
Â  Â  Â  Â  Â  Â  Â  Â  loadUserLinks();
Â  Â  Â  Â  Â  Â  Â  Â  if (isPublic) loadPublicLinks();
Â  Â  Â  Â  Â  Â  } catch (error) {
Â  Â  Â  Â  Â  Â  Â  Â  showMessage('à¸ªà¸£à¹‰à¸²à¸‡à¸¥à¸´à¸‡à¸à¹Œà¹„à¸¡à¹ˆà¸ªà¸³à¹€à¸£à¹‡à¸ˆ: ' + error.message, 'error');
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  function generateShortCode() {
Â  Â  Â  Â  Â  Â  return Math.random().toString(36).substring(2, 8);
Â  Â  Â  Â  }

Â  Â  Â  Â  // Load Functions
Â  Â  Â  Â  async function loadUserLinks() {
Â  Â  Â  Â  Â  Â  const snapshot = await db.collection('urls')
Â  Â  Â  Â  Â  Â  Â  Â  .where('createdBy', '==', currentUser.uid)
Â  Â  Â  Â  Â  Â  Â  Â  .orderBy('createdAt', 'desc')
Â  Â  Â  Â  Â  Â  Â  Â  .get();

Â  Â  Â  Â  Â  Â  const container = document.getElementById('myLinksList');
Â  Â  Â  Â  Â  Â  container.innerHTML = '';

Â  Â  Â  Â  Â  Â  if (snapshot.empty) {
Â  Â  Â  Â  Â  Â  Â  Â  container.innerHTML = '<p class="text-gray-500 text-center py-8">à¸¢à¸±à¸‡à¹„à¸¡à¹ˆà¸¡à¸µà¸¥à¸´à¸‡à¸à¹Œ</p>';
Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  snapshot.forEach(doc => {
Â  Â  Â  Â  Â  Â  Â  Â  const data = doc.data();
Â  Â  Â  Â  Â  Â  Â  Â  const linkElement = createLinkElement(data, true);
Â  Â  Â  Â  Â  Â  Â  Â  container.appendChild(linkElement);
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  }

Â  Â  Â  Â  async function loadPublicLinks() {
Â  Â  Â  Â  Â  Â  const snapshot = await db.collection('urls')
Â  Â  Â  Â  Â  Â  Â  Â  .where('isPublic', '==', true)
Â  Â  Â  Â  Â  Â  Â  Â  .orderBy('createdAt', 'desc')
Â  Â  Â  Â  Â  Â  Â  Â  .get();

Â  Â  Â  Â  Â  Â  const container = document.getElementById('publicLinksList');
Â  Â  Â  Â  Â  Â  container.innerHTML = '';

Â  Â  Â  Â  Â  Â  if (snapshot.empty) {
Â  Â  Â  Â  Â  Â  Â  Â  container.innerHTML = '<p class="text-gray-500 text-center py-8">à¸¢à¸±à¸‡à¹„à¸¡à¹ˆà¸¡à¸µà¸¥à¸´à¸‡à¸à¹Œà¸ªà¸²à¸˜à¸²à¸£à¸“à¸°</p>';
Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  snapshot.forEach(doc => {
Â  Â  Â  Â  Â  Â  Â  Â  const data = doc.data();
Â  Â  Â  Â  Â  Â  Â  Â  const linkElement = createLinkElement(data, false);
Â  Â  Â  Â  Â  Â  Â  Â  container.appendChild(linkElement);
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  }

Â  Â  Â  Â  async function loadPendingUsers() {
Â  Â  Â  Â  Â  Â  const snapshot = await db.collection('users')
Â  Â  Â  Â  Â  Â  Â  Â  .where('approved', '==', false)
Â  Â  Â  Â  Â  Â  Â  Â  .get();

Â  Â  Â  Â  Â  Â  const container = document.getElementById('pendingUsers');
Â  Â  Â  Â  Â  Â  container.innerHTML = '';

Â  Â  Â  Â  Â  Â  if (snapshot.empty) {
Â  Â  Â  Â  Â  Â  Â  Â  container.innerHTML = '<p class="text-gray-500">à¹„à¸¡à¹ˆà¸¡à¸µà¸„à¸³à¸‚à¸­à¸­à¸™à¸¸à¸¡à¸±à¸•à¸´</p>';
Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  snapshot.forEach(doc => {
Â  Â  Â  Â  Â  Â  Â  Â  const data = doc.data();
Â  Â  Â  Â  Â  Â  Â  Â  const userElement = createPendingUserElement(doc.id, data);
Â  Â  Â  Â  Â  Â  Â  Â  container.appendChild(userElement);
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  }

Â  Â  Â  Â  // Helper Functions
Â  Â  Â  Â  function createLinkElement(data, showActions) {
Â  Â  Â  Â  Â  Â  const div = document.createElement('div');
Â  Â  Â  Â  Â  Â  div.className = 'bg-white rounded-xl p-4 border border-gray-200 hover:shadow-md transition-all';
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  div.innerHTML = `
Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex flex-col sm:flex-row sm:items-center justify-between space-y-2 sm:space-y-0">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex-1 min-w-0">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p class="text-sm font-medium text-gray-900 truncate">${data.shortUrl}</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p class="text-sm text-gray-500 truncate">${data.originalUrl}</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex items-center space-x-4 mt-2">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="text-xs text-gray-400">à¸„à¸¥à¸´à¸: ${data.clicks || 0}</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ${data.isPublic ? '<span class="text-xs bg-green-100 text-green-800 px-2 py-1 rounded-full">à¸ªà¸²à¸˜à¸²à¸£à¸“à¸°</span>' : '<span class="text-xs bg-gray-100 text-gray-800 px-2 py-1 rounded-full">à¸ªà¹ˆà¸§à¸™à¸•à¸±à¸§</span>'}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex space-x-2">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button onclick="generateQrCodeWithLogo('${data.shortUrl}')" class="bg-indigo-500 hover:bg-indigo-600 text-white px-3 py-1 rounded-lg text-sm btn-hover">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  QR Code
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button onclick="copyToClipboard('${data.shortUrl}')" class="bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded-lg text-sm btn-hover">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  à¸„à¸±à¸”à¸¥à¸­à¸
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ${showActions ? `<button onclick="deleteUrl('${data.shortCode}')" class="bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded-lg text-sm btn-hover">à¸¥à¸š</button>` : ''}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  `;
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  return div;
Â  Â  Â  Â  }

Â  Â  Â  Â  function createPendingUserElement(userId, data) {
Â  Â  Â  Â  Â  Â  const div = document.createElement('div');
Â  Â  Â  Â  Â  Â  div.className = 'bg-white rounded-xl p-4 border border-gray-200';
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  div.innerHTML = `
Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex items-center justify-between">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p class="font-medium text-gray-900">${data.name}</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p class="text-sm text-gray-500">${data.email}</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex space-x-2">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button onclick="approveUser('${userId}')" class="bg-green-500 hover:bg-green-600 text-white px-3 py-1 rounded-lg text-sm btn-hover">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  à¸­à¸™à¸¸à¸¡à¸±à¸•à¸´
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button onclick="rejectUser('${userId}')" class="bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded-lg text-sm btn-hover">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  à¸›à¸à¸´à¹€à¸ªà¸˜
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  `;
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  return div;
Â  Â  Â  Â  }

Â  Â  Â  Â  // Action Functions
Â  Â  Â  Â  async function copyToClipboard(text) {
Â  Â  Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  Â  Â  await navigator.clipboard.writeText(text);
Â  Â  Â  Â  Â  Â  Â  Â  showMessage('à¸„à¸±à¸”à¸¥à¸­à¸à¸¥à¸´à¸‡à¸à¹Œà¹à¸¥à¹‰à¸§!', 'success');
Â  Â  Â  Â  Â  Â  } catch (error) {
Â  Â  Â  Â  Â  Â  Â  Â  showMessage('à¹„à¸¡à¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸–à¸„à¸±à¸”à¸¥à¸­à¸à¹„à¸”à¹‰', 'error');
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  async function deleteUrl(shortCode) {
Â  Â  Â  Â  Â  Â  if (confirm('à¸„à¸¸à¸“à¸•à¹‰à¸­à¸‡à¸à¸²à¸£à¸¥à¸šà¸¥à¸´à¸‡à¸à¹Œà¸™à¸µà¹‰à¸«à¸£à¸·à¸­à¹„à¸¡à¹ˆ?')) {
Â  Â  Â  Â  Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  await db.collection('urls').doc(shortCode).delete();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  showMessage('à¸¥à¸šà¸¥à¸´à¸‡à¸à¹Œà¹à¸¥à¹‰à¸§', 'success');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  loadUserLinks();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  loadPublicLinks();
Â  Â  Â  Â  Â  Â  Â  Â  } catch (error) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  showMessage('à¹„à¸¡à¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸–à¸¥à¸šà¸¥à¸´à¸‡à¸à¹Œà¹„à¸”à¹‰', 'error');
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  async function approveUser(userId) {
Â  Â  Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  Â  Â  await db.collection('users').doc(userId).update({
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  approved: true
Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  Â  Â  showMessage('à¸­à¸™à¸¸à¸¡à¸±à¸•à¸´à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰à¹à¸¥à¹‰à¸§', 'success');
Â  Â  Â  Â  Â  Â  Â  Â  loadPendingUsers();
Â  Â  Â  Â  Â  Â  } catch (error) {
Â  Â  Â  Â  Â  Â  Â  Â  showMessage('à¹„à¸¡à¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸–à¸­à¸™à¸¸à¸¡à¸±à¸•à¸´à¹„à¸”à¹‰', 'error');
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  async function rejectUser(userId) {
Â  Â  Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  Â  Â  await db.collection('users').doc(userId).delete();
Â  Â  Â  Â  Â  Â  Â  Â  showMessage('à¸›à¸à¸´à¹€à¸ªà¸˜à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰à¹à¸¥à¹‰à¸§', 'success');
Â  Â  Â  Â  Â  Â  Â  Â  loadPendingUsers();
Â  Â  Â  Â  Â  Â  } catch (error) {
Â  Â  Â  Â  Â  Â  Â  Â  showMessage('à¹„à¸¡à¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸–à¸›à¸à¸´à¹€à¸ªà¸˜à¹„à¸”à¹‰', 'error');
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  // ğŸŸ¢ QR Code Functions
Â  Â  Â  Â  async function generateQrCodeWithLogo(url) {
Â  Â  Â  Â  Â  Â  const modalId = 'qrCodeModal';
Â  Â  Â  Â  Â  Â  const qrCodeContainerId = 'qrcodeCanvas';
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  // à¸ªà¸£à¹‰à¸²à¸‡ Modal
Â  Â  Â  Â  Â  Â  const modalHtml = `
Â  Â  Â  Â  Â  Â  Â  Â  <div id="${modalId}" class="fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 backdrop-blur-sm animate-fade-in" onclick="if(event.target.id === '${modalId}') document.getElementById('${modalId}').remove()">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="bg-white rounded-xl shadow-2xl p-6 w-full max-w-sm transform transition-all scale-100" onclick="event.stopPropagation()">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h3 class="text-xl font-bold text-gray-800 mb-4 text-center">QR Code à¸ªà¸³à¸«à¸£à¸±à¸šà¸¥à¸´à¸‡à¸à¹Œ</h3>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p class="text-sm text-center text-gray-500 mb-4 truncate">${url}</p>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div id="qrCodeWrapper" class="relative p-2 bg-white mx-auto w-fit border-2 border-gray-200 rounded-lg">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div id="${qrCodeContainerId}"></div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <img id="logoOverlay" src="${LOGO_URL}" alt="Logo" class="absolute inset-0 m-auto w-16 h-16 rounded-full border-4 border-white shadow-lg object-cover" style="z-index: 10;">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="mt-6 flex space-x-3">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button onclick="downloadQrCode('${qrCodeContainerId}', '${modalId}')" class="flex-1 bg-green-600 hover:bg-green-700 text-white font-medium py-2 rounded-xl btn-hover">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ğŸ’¾ à¸”à¸²à¸§à¸™à¹Œà¹‚à¸«à¸¥à¸” QR
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button onclick="document.getElementById('${modalId}').remove()" class="flex-1 bg-gray-300 hover:bg-gray-400 text-gray-800 font-medium py-2 rounded-xl btn-hover">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  à¸›à¸´à¸”
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  `;
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  // à¸¥à¸š Modal à¹€à¸à¹ˆà¸²à¹à¸¥à¸°à¹€à¸à¸´à¹ˆà¸¡ Modal à¹ƒà¸«à¸¡à¹ˆ
Â  Â  Â  Â  Â  Â  const existingModal = document.getElementById(modalId);
Â  Â  Â  Â  Â  Â  if (existingModal) existingModal.remove();

Â  Â  Â  Â  Â  Â  document.body.insertAdjacentHTML('beforeend', modalHtml);

Â  Â  Â  Â  Â  Â  // à¸ªà¸£à¹‰à¸²à¸‡ QR Code à¸”à¹‰à¸§à¸¢ qrcode.js
Â  Â  Â  Â  Â  Â  const qrCodeDiv = document.getElementById(qrCodeContainerId);
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  // à¸•à¹‰à¸­à¸‡à¹€à¸„à¸¥à¸µà¸¢à¸£à¹Œ element à¸à¹ˆà¸­à¸™à¹€à¸£à¸µà¸¢à¸à¹ƒà¸Šà¹‰ qrcodejs à¸­à¸µà¸à¸„à¸£à¸±à¹‰à¸‡
Â  Â  Â  Â  Â  Â  if(qrCodeDiv) qrCodeDiv.innerHTML = ''; 

Â  Â  Â  Â  Â  Â  // à¸à¸³à¸«à¸™à¸”à¸‚à¸™à¸²à¸” QR Code à¹ƒà¸«à¹‰à¸¡à¸µà¸à¸·à¹‰à¸™à¸—à¸µà¹ˆà¸à¸­à¸ªà¸³à¸«à¸£à¸±à¸šà¹‚à¸¥à¹‚à¸à¹‰
Â  Â  Â  Â  Â  Â  new QRCode(qrCodeDiv, {
Â  Â  Â  Â  Â  Â  Â  Â  text: url,
Â  Â  Â  Â  Â  Â  Â  Â  width: 256,
Â  Â  Â  Â  Â  Â  Â  Â  height: 256,
Â  Â  Â  Â  Â  Â  Â  Â  colorDark : "#000000",
Â  Â  Â  Â  Â  Â  Â  Â  colorLight : "#ffffff",
Â  Â  Â  Â  Â  Â  Â  Â  correctLevel : QRCode.CorrectLevel.H // à¹ƒà¸Šà¹‰à¸£à¸°à¸”à¸±à¸šà¸„à¸§à¸²à¸¡à¸–à¸¹à¸à¸•à¹‰à¸­à¸‡à¸ªà¸¹à¸‡ (H) à¹€à¸à¸·à¹ˆà¸­à¸£à¸­à¸‡à¸£à¸±à¸šà¸à¸²à¸£à¸¡à¸µà¹‚à¸¥à¹‚à¸à¹‰
Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  // à¸›à¸£à¸±à¸šà¸•à¸³à¹à¸«à¸™à¹ˆà¸‡à¹‚à¸¥à¹‚à¸à¹‰à¹ƒà¸«à¹‰à¸­à¸¢à¸¹à¹ˆà¸•à¸£à¸‡à¸à¸¥à¸²à¸‡à¸­à¸¢à¹ˆà¸²à¸‡à¹à¸¡à¹ˆà¸™à¸¢à¸³ (à¹à¸¡à¹‰à¸§à¹ˆà¸² CSS à¸ˆà¸°à¸ˆà¸±à¸”à¸à¸²à¸£à¸ªà¹ˆà¸§à¸™à¹ƒà¸«à¸à¹ˆà¹à¸¥à¹‰à¸§)
Â  Â  Â  Â  Â  Â  const qrSize = 256; 
Â  Â  Â  Â  Â  Â  const logoSize = 64; // w-16 h-16 à¹ƒà¸™ tailwind à¸„à¸·à¸­ 4rem * 16px/rem = 64px
Â  Â  Â  Â  Â  Â  const logoElement = document.getElementById('logoOverlay');
Â  Â  Â  Â  Â  Â  logoElement.style.width = `${logoSize}px`;
Â  Â  Â  Â  Â  Â  logoElement.style.height = `${logoSize}px`;
Â  Â  Â  Â  Â  Â  logoElement.style.top = '50%';
Â  Â  Â  Â  Â  Â  logoElement.style.left = '50%';
Â  Â  Â  Â  Â  Â  logoElement.style.transform = 'translate(-50%, -50%)';
Â  Â  Â  Â  }

Â  Â  Â  Â  async function downloadQrCode(qrCodeContainerId, modalId) {
Â  Â  Â  Â  Â  Â  const wrapper = document.getElementById('qrCodeWrapper');
Â  Â  Â  Â  Â  Â  if (!wrapper) return showMessage('à¹„à¸¡à¹ˆà¸à¸šà¸­à¸‡à¸„à¹Œà¸›à¸£à¸°à¸à¸­à¸š QR Code', 'error');

Â  Â  Â  Â  Â  Â  // à¸£à¸­à¹ƒà¸«à¹‰ qrcodejs à¸ªà¸£à¹‰à¸²à¸‡à¸ à¸²à¸à¸ˆà¸™à¹€à¸ªà¸£à¹‡à¸ˆà¸à¹ˆà¸­à¸™
Â  Â  Â  Â  Â  Â  await new Promise(resolve => setTimeout(resolve, 300));

Â  Â  Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  Â  Â  // à¹ƒà¸Šà¹‰ html2canvas à¹€à¸à¸·à¹ˆà¸­à¸£à¸§à¸¡ QR Code à¹à¸¥à¸°à¹‚à¸¥à¹‚à¸à¹‰à¹€à¸›à¹‡à¸™à¸ à¸²à¸à¹€à¸”à¸µà¸¢à¸§
Â  Â  Â  Â  Â  Â  Â  Â  const canvas = await html2canvas(wrapper, {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  scale: 4, // à¹€à¸à¸´à¹ˆà¸¡à¸„à¸§à¸²à¸¡à¸¥à¸°à¹€à¸­à¸µà¸¢à¸”à¸‚à¸­à¸‡à¸ à¸²à¸à¸—à¸µà¹ˆà¸ˆà¸±à¸šà¹„à¸”à¹‰
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  useCORS: true, // à¸ªà¸³à¸„à¸±à¸à¸ªà¸³à¸«à¸£à¸±à¸šà¸ à¸²à¸à¸ˆà¸²à¸à¸ à¸²à¸¢à¸™à¸­à¸
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  backgroundColor: '#ffffff' // à¸à¸³à¸«à¸™à¸”à¸à¸·à¹‰à¸™à¸«à¸¥à¸±à¸‡à¹ƒà¸«à¹‰à¹€à¸›à¹‡à¸™à¸ªà¸µà¸‚à¸²à¸§
Â  Â  Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  Â  Â  // à¸ªà¸£à¹‰à¸²à¸‡à¸¥à¸´à¸‡à¸à¹Œà¸ªà¸³à¸«à¸£à¸±à¸šà¸”à¸²à¸§à¸™à¹Œà¹‚à¸«à¸¥à¸”
Â  Â  Â  Â  Â  Â  Â  Â  const link = document.createElement('a');
Â  Â  Â  Â  Â  Â  Â  Â  link.download = 'qrcode_spt_moral.png';
Â  Â  Â  Â  Â  Â  Â  Â  link.href = canvas.toDataURL('image/png');
Â  Â  Â  Â  Â  Â  Â  Â  document.body.appendChild(link);
Â  Â  Â  Â  Â  Â  Â  Â  link.click();
Â  Â  Â  Â  Â  Â  Â  Â  document.body.removeChild(link);

Â  Â  Â  Â  Â  Â  Â  Â  showMessage('à¸”à¸²à¸§à¸™à¹Œà¹‚à¸«à¸¥à¸” QR Code à¸ªà¸³à¹€à¸£à¹‡à¸ˆ!', 'success');
Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById(modalId).remove(); // à¸›à¸´à¸” Modal à¸«à¸¥à¸±à¸‡à¸ˆà¸²à¸à¸”à¸²à¸§à¸™à¹Œà¹‚à¸«à¸¥à¸”
Â  Â  Â  Â  Â  Â  } catch (error) {
Â  Â  Â  Â  Â  Â  Â  Â  console.error('Download error:', error);
Â  Â  Â  Â  Â  Â  Â  Â  showMessage('à¹€à¸à¸´à¸”à¸‚à¹‰à¸­à¸œà¸´à¸”à¸à¸¥à¸²à¸”à¹ƒà¸™à¸à¸²à¸£à¸”à¸²à¸§à¸™à¹Œà¹‚à¸«à¸¥à¸” QR Code: ' + error.message, 'error');
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }
Â  Â  Â  Â  // ----------------------------------------------------

Â  Â  Â  Â  // Message Function
Â  Â  Â  Â  function showMessage(message, type) {
Â  Â  Â  Â  Â  Â  const container = document.getElementById('messageContainer');
Â  Â  Â  Â  Â  Â  const messageDiv = document.createElement('div');
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  const bgColor = type === 'success' ? 'bg-green-500' : type === 'error' ? 'bg-red-500' : 'bg-yellow-500';
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  messageDiv.className = `${bgColor} text-white px-6 py-3 rounded-lg shadow-lg mb-4 animate-fade-in`;
Â  Â  Â  Â  Â  Â  messageDiv.textContent = message;
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  container.appendChild(messageDiv);
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  setTimeout(() => {
Â  Â  Â  Â  Â  Â  Â  Â  messageDiv.remove();
Â  Â  Â  Â  Â  Â  }, 5000);
Â  Â  Â  Â  }
Â  Â  </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'98efa4ff92f27325',t:'MTc2MDUzNDc0OC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
